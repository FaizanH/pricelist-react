(this.webpackJsonppricelist=this.webpackJsonppricelist||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"localhost":"https://us-central1-pricelist-boulvandre.cloudfunctions.net/app","production":"http://localhost:5001/pricelist-boulvandre/us-central1/app"}')},200:function(e,t,r){},526:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(30),s=r.n(c),o=r(41),i=r(11),u=r.n(i),d=r(15),j=r(13),l=(r(199),r(200),r(12)),b=r(20),h=r(133);try{h.a.initializeApp({apiKey:"AIzaSyBcVUIMEeHo7uJcE8UvOwq8Dzz-iE4grk4",authDomain:"pricelist-boulvandre.firebaseapp.com",databaseURL:"https://pricelist-boulvandre-default-rtdb.firebaseio.com",projectId:"pricelist-boulvandre",storageBucket:"pricelist-boulvandre.appspot.com",messagingSenderId:"137243822858",appId:"1:137243822858:web:9ae1e2ded5ca6322e788f3"})}catch(je){/already exists/.test(je.message)||console.error("Firebase initialization error",je.stack)}var p=h.a,O=r(17),x=r.n(O),m=r(534),f=r(18),v=function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.auth().currentUser,e.t0=t,!e.t0){e.next=6;break}return e.next=5,t.getIdToken();case 5:e.t0=e.sent;case 6:return r=e.t0,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,e.prev=3,e.next=6,x.a.post(f.localhost+"/users/email",{email:t},r);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,e.prev=3,e.next=6,x.a.post(f.localhost+"/users/add",t,r);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,e.prev=3,e.next=6,x.a.get(f.localhost+"/products/id/"+t,r);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.prev=3,e.next=6,x.a.get(f.localhost+"/products/",t);case 6:return r=e.sent,e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return n=e.sent,e.prev=3,e.next=6,x.a.post(f.localhost+"/products/update/"+t,r,n);case 6:return a=e.sent,e.abrupt("return",a.data);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}(),k=r(195),P=r(2),L=["component","user","isLoggedIn"],N=function(e){var t=e.component,r=e.user,n=e.isLoggedIn,a=Object(k.a)(e,L);return Object(P.jsx)(b.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){return n&&"Administrator"==r.permission_group?Object(P.jsx)(t,Object(o.a)(Object(o.a)({},a),{},{user:r},e)):Object(P.jsx)(b.a,{to:{pathname:"/401",state:{from:e.location}}})}}))},U=function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("p",{children:"401 - Unauthorised"}),Object(P.jsx)("p",{children:"You do not have access to this page. Please contact your administrator"}),Object(P.jsx)("p",{children:Object(P.jsx)(l.b,{to:"/",children:"Back to Home"})})]})},I=r(536),D=r(538),E=r(535),A=function(e){return Object(P.jsx)("div",{className:"user-menu",children:Object(P.jsxs)(I.a,{className:"p-2 w-100",bg:"dark",variant:"dark",expand:"lg",children:[Object(P.jsx)(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(P.jsx)(I.a.Brand,{as:l.b,to:"/",children:"Pricelist"}),Object(P.jsx)(I.a.Collapse,{id:"basic-navbar-nav",children:Object(P.jsxs)(D.a,{className:"m-auto",children:[Object(P.jsx)(D.a.Link,{className:"",as:l.b,to:"/catalogue",children:"Catalogue"}),Object(P.jsx)(E.a,{title:"Manage",id:"basic-nav-dropdown",children:Object(P.jsx)(E.a.Item,{as:l.b,to:"/admin/products",children:"Manage Products"})})]})}),Object(P.jsx)(I.a.Brand,{className:"navbar-user",as:l.b,to:"/dashboard",children:e.user.username.toString()})]})})},_=function(e){return Object(P.jsx)("div",{className:"admin-menu",children:Object(P.jsxs)(I.a,{className:"p-2 w-100",bg:"dark",variant:"dark",expand:"lg",children:[Object(P.jsx)(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(P.jsx)(I.a.Brand,{as:l.b,to:"/",children:"Pricelist"}),Object(P.jsx)(I.a.Collapse,{id:"basic-navbar-nav",children:Object(P.jsxs)(D.a,{className:"m-auto",children:[Object(P.jsx)(D.a.Link,{className:"",as:l.b,to:"/catalogue",children:"Catalogue"}),Object(P.jsxs)(E.a,{title:"Manage",id:"basic-nav-dropdown",children:[Object(P.jsx)(E.a.Item,{as:l.b,to:"/admin/users",children:"Manage Users"}),Object(P.jsx)(E.a.Item,{as:l.b,to:"/admin/products",children:"Manage Products"})]})]})}),Object(P.jsx)(I.a.Brand,{className:"navbar-user",as:l.b,to:"/dashboard",children:e.user.username.toString()})]})})},B=r(55),M=r(56),q=r(32),T=r(59),R=r(57),z=r(537),K=r(191),G=function(e){Object(T.a)(r,e);var t=Object(R.a)(r);function r(e){var n;return Object(B.a)(this,r),(n=t.call(this,e)).onChangeUsername=n.onChangeUsername.bind(Object(q.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(q.a)(n)),n.onSubmit=n.onSubmit.bind(Object(q.a)(n)),n.state={username:"",password:""},n}return Object(M.a)(r,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};console.log(t),x.a.post(f.localhost+"/users/add",t).then((function(e){return console.log(e.data)})),this.setState({username:"",password:""})}},{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h6",{children:"Add User"}),Object(P.jsxs)(z.a,{onSubmit:this.onSubmit,children:[Object(P.jsxs)(z.a.Group,{children:[Object(P.jsx)(z.a.Label,{children:"Username"}),Object(P.jsx)(z.a.Control,{type:"username",required:!0,value:this.state.username,onChange:this.onChangeUsername,placeholder:"Enter Username"}),Object(P.jsx)(z.a.Label,{children:"Password"}),Object(P.jsx)(z.a.Control,{type:"password",required:!0,value:this.state.password,onChange:this.onChangePassword,placeholder:"Enter Password"})]}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/users",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Create"})]})]})}}]),r}(n.Component),J=r(532),V=function(e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.user.username}),Object(P.jsxs)("td",{children:[e.user.first_name," ",e.user.last_name]}),Object(P.jsx)("td",{children:e.user.status}),Object(P.jsxs)("td",{children:[Object(P.jsx)(l.b,{to:"/admin/users/edit/"+e.user._id,children:"edit"})," |",Object(P.jsx)("a",{href:"#",onClick:function(){e.deleteUser(e.user._id)},children:"delete"})]})]})},H=function(e){Object(T.a)(r,e);var t=Object(R.a)(r);function r(e){var n;return Object(B.a)(this,r),(n=t.call(this,e)).deleteUser=n.deleteUser.bind(Object(q.a)(n)),n.state={users:[]},n}return Object(M.a)(r,[{key:"componentDidMount",value:function(){var e=this;x.a.get(f.localhost+"/users/").then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"deleteUser",value:function(e){x.a.delete(f.localhost+"/users/"+e).then((function(e){return console.log(e.data)})),this.setState({users:this.state.users.filter((function(t){return t._id!==e}))})}},{key:"usersList",value:function(){var e=this;return this.state.users.map((function(t){return Object(P.jsx)(V,{user:t,deleteUser:e.deleteUser},t._id)}))}},{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Manage Users"}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/create-user",variant:"primary",type:"submit",children:"Add User"}),Object(P.jsx)("br",{}),Object(P.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Username"}),Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{children:"Status"})]})}),Object(P.jsx)("tbody",{children:this.usersList()})]})]})}}]),r}(n.Component),Y=r(533),F=r(192),W=(r(232),function(e){var t=Object(n.useState)([]),r=Object(j.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)({Customer:"Test Name",Price:199}),o=Object(j.a)(s,2),i=(o[0],o[1],Object(n.useState)(!1)),b=Object(j.a)(i,2),h=b[0],p=b[1];Object(n.useEffect)((function(){return!0,(h||0===a.length)&&O(),function(){!1}}),[h]);var O=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:(r=e.sent)&&(c(r),p(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(r),x.a.delete(f.localhost+"/products/pricing/"+t+"/"+r).then((function(e){console.log(e.data),p(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.customer.Customer}),Object(P.jsx)("td",{children:e.product.sku}),Object(P.jsx)("td",{children:e.product.title}),Object(P.jsx)("td",{children:e.customer.Price}),Object(P.jsxs)("td",{children:[Object(P.jsx)(l.b,{to:"/admin/products/edit/"+e.product._id,children:"edit"})," |",Object(P.jsx)("a",{href:"#",onClick:function(){e.deleteProduct(e.product._id,e.customer.Customer)},children:"delete"})]})]})};return Object(P.jsxs)("div",{children:[Object(P.jsx)("p",{children:"Catalogue Management Page"}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/add-product",variant:"primary",type:"submit",children:"Add Product"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(z.a,{onSubmit:function(e){e.preventDefault(),console.log("press me!")},className:"w-50",children:Object(P.jsxs)(Y.a,{className:"mb-3",children:[Object(P.jsx)(F.a,{type:"text",placeholder:"Customer"}),Object(P.jsx)(Y.a.Append,{children:Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Search"})})]})}),Object(P.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Customer"}),Object(P.jsx)("th",{children:"SKU"}),Object(P.jsx)("th",{children:"Title"}),Object(P.jsx)("th",{children:"Price"}),Object(P.jsx)("th",{children:"Modify"})]})}),Object(P.jsx)("tbody",{children:function(e){if(""!=a)return a.map((function(e){return e.pricing.map((function(t){return Object(P.jsx)(v,{product:e,customer:t,deleteProduct:m},t._id)}))}))}()})]})]})}),Q=r(103),X=r(102),Z=function(e){var t=Object(n.useState)([]),r=Object(j.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(""),o=Object(j.a)(s,2),i=o[0],b=o[1],h=Object(n.useState)(""),p=Object(j.a)(h,2),O=p[0],m=p[1],v=Object(n.useState)(!1),g=Object(j.a)(v,2),C=g[0],w=g[1],S=Object(n.useState)(""),y=Object(j.a)(S,2),k=y[0],L=y[1],N=Object(n.useState)(""),U=Object(j.a)(N,2),I=U[0],D=U[1];Object(n.useEffect)((function(){return!0,console.log(a),function(){!1}}),[a]);var E=function(e){c(a.filter((function(t){return t.Customer!==e})))},A=function(e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.customer.Customer}),Object(P.jsx)("td",{children:e.customer.Price}),Object(P.jsx)("td",{children:Object(P.jsx)("a",{href:"#",onClick:function(){e.deleteCustomerPrice(e.customer.Customer)},children:"delete"})})]})},_=function(e){return Object(P.jsx)("tr",{children:Object(P.jsx)("td",{colSpan:"100%",children:Object(P.jsx)("div",{onDragOver:function(e){e.preventDefault()},onDrop:function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,t.dataTransfer.files[0].text();case 3:r=e.sent,n=Object(X.parse)(r,{header:!0}),c(n.data),w(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Drag CSV to import Customer Pricing"})})})};return Object(P.jsxs)("div",{children:[Object(P.jsx)("h6",{children:"Create New Product"}),Object(P.jsxs)(z.a,{id:"submit-new-product",onSubmit:function(e){e.preventDefault();var t={sku:i,title:O,pricing:a};x.a.post(f.localhost+"/products/add",t).then((function(e){console.log(e.data),window.location="/admin/products"}))},className:"mb-3",children:[Object(P.jsx)(z.a.Label,{children:"SKU"}),Object(P.jsx)(z.a.Control,{type:"text",required:!0,value:i,onChange:function(e){return b(e.target.value)},placeholder:""}),Object(P.jsx)(z.a.Label,{children:"Name"}),Object(P.jsx)(z.a.Control,{type:"text",value:O,onChange:function(e){return m(e.target.value)},placeholder:""}),Object(P.jsx)("br",{}),Object(P.jsx)(z.a.Label,{children:"Add New Customer Price"}),Object(P.jsx)(z.a.Control,{type:"text",value:k,onChange:function(e){return L(e.target.value)},placeholder:"Enter Customer Name"}),Object(P.jsx)(z.a.Control,{type:"text",value:I,onChange:function(e){return D(e.target.value)},placeholder:"Enter Price"}),Object(P.jsx)(K.a,{onClick:function(e){e.preventDefault();var t={Customer:k,Price:I};c((function(e){return[].concat(Object(Q.a)(e),[t])}))},children:"Add"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Customer"}),Object(P.jsx)("th",{children:"Price"}),Object(P.jsx)("th",{children:"Modify"})]})}),Object(P.jsx)("tbody",{children:C||0!=a.length?a.map((function(e){return Object(P.jsx)(A,{customer:e,deleteCustomerPrice:E},a.indexOf(e))})):Object(P.jsx)(_,{})})]}),Object(P.jsx)(K.a,{onClick:function(){return c([])},children:"Clear"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/products",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Create"})]})]})},$=function(e){var t=Object(n.useState)(""),r=Object(j.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(""),o=Object(j.a)(s,2),i=o[0],b=o[1],h=Object(n.useState)(""),p=Object(j.a)(h,2),O=p[0],x=p[1],m=Object(n.useState)([]),f=Object(j.a)(m,2),v=f[0],g=f[1],C=Object(n.useState)(!1),S=Object(j.a)(C,2),k=S[0],L=S[1],N=Object(n.useState)(""),U=Object(j.a)(N,2),I=U[0],D=U[1],E=Object(n.useState)(0),A=Object(j.a)(E,2),_=A[0],B=A[1];Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e.match.params.id);case 2:(r=t.sent)&&(c(r.sku),b(r.active),x(r.title),g(r.pricing));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return!0,function(){t.apply(this,arguments)}(),function(){!1}}),[]);var M=function(){var t=Object(d.a)(u.a.mark((function t(r){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),n={sku:a,active:i,title:O,pricing:v},console.log(v),console.log(n),t.next=6,y(e.match.params.id,n);case 6:(c=t.sent)&&(console.log(c),window.location="/admin/products");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(e){g(v.filter((function(t){return t.Customer!==e})))},T=function(e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.customer.Customer}),Object(P.jsx)("td",{children:e.customer.Price}),Object(P.jsx)("td",{children:Object(P.jsx)("a",{href:"#",onClick:function(){e.deleteCustomerPrice(e.customer.Customer)},children:"delete"})})]})},R=function(e){return Object(P.jsx)("tr",{children:Object(P.jsx)("td",{colSpan:"100%",children:Object(P.jsx)("div",{onDragOver:function(e){e.preventDefault()},onDrop:function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,t.dataTransfer.files[0].text();case 3:r=e.sent,n=Object(X.parse)(r,{header:!0}),console.log(n.data),g(n.data),L(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Drag CSV to import Customer Pricing"})})})};return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Edit Product"}),Object(P.jsxs)(z.a,{onSubmit:M,className:"mb-3",children:[Object(P.jsx)(z.a.Label,{children:"SKU"}),Object(P.jsx)(z.a.Control,{type:"text",required:!0,value:a,onChange:function(e){return c(e.target.value)},placeholder:""}),Object(P.jsx)(z.a.Label,{children:"Name"}),Object(P.jsx)(z.a.Control,{type:"text",required:!0,value:O,onChange:function(e){return x(e.target.value)},placeholder:""}),Object(P.jsx)("br",{}),Object(P.jsx)(z.a.Label,{children:"Add New Customer Price"}),Object(P.jsx)(z.a.Control,{type:"text",value:I,onChange:function(e){return D(e.target.value)},placeholder:"Enter Customer Name"}),Object(P.jsx)(z.a.Control,{type:"text",value:_,onChange:function(e){return B(e.target.value)},placeholder:"Enter Price"}),Object(P.jsx)(K.a,{onClick:function(e){e.preventDefault();var t=parseInt(_),r={Customer:I,Price:t};g((function(e){return[].concat(Object(Q.a)(e),[r])}))},children:"Add"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Customer"}),Object(P.jsx)("th",{children:"Price"}),Object(P.jsx)("th",{children:"Modify"})]})}),Object(P.jsx)("tbody",{children:k||0!=v.length?v.map((function(e){return Object(P.jsx)(T,{customer:e,deleteCustomerPrice:q},v.indexOf(e))})):Object(P.jsx)(R,{})})]}),Object(P.jsx)(K.a,{onClick:function(){return g([])},children:"Clear"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/products",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Save"})]})]})},ee=function(e){Object(T.a)(r,e);var t=Object(R.a)(r);function r(e){var n;return Object(B.a)(this,r),(n=t.call(this,e)).onChangeUsername=n.onChangeUsername.bind(Object(q.a)(n)),n.onChangeCurrentPassword=n.onChangeCurrentPassword.bind(Object(q.a)(n)),n.onChangeNewPassword=n.onChangeNewPassword.bind(Object(q.a)(n)),n.onSubmit=n.onSubmit.bind(Object(q.a)(n)),n.state={username:"",currentPassword:"",newPassword:""},n}return Object(M.a)(r,[{key:"componentDidMount",value:function(){var e=this;x.a.get(f.localhost+"/users/id/"+this.props.match.params.id).then((function(t){e.setState({username:t.data.username})})).catch((function(e){return console.log(e)}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeCurrentPassword",value:function(e){this.setState({currentPassword:e.target.value})}},{key:"onChangeNewPassword",value:function(e){this.setState({newPassword:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,currentPassword:this.state.currentPassword,newPassword:this.state.newPassword};console.log(t),x.a.post(f.localhost+"/users/changePassword/"+this.props.match.params.id,t).then((function(e){return console.log(e.data)})),this.setState({username:"",currentPassword:"",newPassword:""})}},{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h6",{children:"Edit User"}),Object(P.jsxs)(z.a,{onSubmit:this.onSubmit,children:[Object(P.jsxs)(z.a.Group,{children:[Object(P.jsx)(z.a.Label,{children:"Username"}),Object(P.jsx)(z.a.Control,{type:"username",required:!0,value:this.state.username,onChange:this.onChangeUsername,placeholder:"Enter Username"}),Object(P.jsx)(z.a.Label,{children:"Current Password"}),Object(P.jsx)(z.a.Control,{type:"password",required:!0,value:this.state.currentPassword,onChange:this.onChangeCurrentPassword,placeholder:"Enter Current Password"}),Object(P.jsx)(z.a.Label,{children:"New Password"}),Object(P.jsx)(z.a.Control,{type:"password",required:!0,value:this.state.newPassword,onChange:this.onChangeNewPassword,placeholder:"Enter New Password"})]}),Object(P.jsx)(K.a,{as:l.b,to:"/admin/users",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Save"})]})]})}}]),r}(n.Component),te=function(e){return Object(P.jsx)("div",{className:"menu",children:Object(P.jsxs)(I.a,{className:"p-2 w-100",bg:"dark",variant:"dark",expand:"lg",children:[Object(P.jsx)(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(P.jsx)(I.a.Brand,{as:l.b,to:"/",children:"Pricelist"}),Object(P.jsx)(I.a.Collapse,{id:"basic-navbar-nav"}),Object(P.jsx)(I.a.Brand,{className:"navbar-user",as:l.b,to:"/login",children:"Login"})]})})},re=function(e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.product.sku}),Object(P.jsx)("td",{children:e.product.active.toString()}),Object(P.jsx)("td",{children:e.product.title}),Object(P.jsx)("td",{children:e.product.price})]})},ne=function(e){Object(T.a)(r,e);var t=Object(R.a)(r);function r(e){var n;return Object(B.a)(this,r),(n=t.call(this,e)).fetchData=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:r=e.sent,console.log(r),r&&n.setState({products:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fetchData=n.fetchData.bind(Object(q.a)(n)),n.state={products:[]},n}return Object(M.a)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"productsList",value:function(){var e=this;return this.state.products.map((function(t){return Object(P.jsx)(re,{product:t,deleteProduct:e.deleteProduct},t._id)}))}},{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("p",{children:"Catalogue"}),Object(P.jsx)("br",{}),Object(P.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"SKU"}),Object(P.jsx)("th",{children:"Active"}),Object(P.jsx)("th",{children:"Title"}),Object(P.jsx)("th",{children:"Price"})]})}),Object(P.jsx)("tbody",{children:this.productsList()})]})]})}}]),r}(n.Component),ae=function(e){return Object(P.jsx)("div",{children:Object(P.jsx)("h3",{children:"Home"})})},ce=function(e){return e.isLoggedIn?Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Dashboard"}),Object(P.jsx)("p",{children:"Secret Page"}),Object(P.jsxs)("p",{children:["Logged in as: ",e.user.username.toString()]}),Object(P.jsxs)("p",{children:["Access Level: ",e.user.permission_group.toString()]})]}):(console.log("You need to log in to view dashboard"),Object(P.jsx)(b.a,{to:e.failedRoute}))},se=function(e){var t=Object(n.useState)(""),r=Object(j.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(""),o=Object(j.a)(s,2),i=o[0],h=o[1],O=function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),e.setLoadingState(!0),p.auth().signInWithEmailAndPassword(a,i).then(function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(r),e.setLoadingState(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Incorrect email or password")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.isLoggedIn?Object(P.jsx)(b.a,{to:e.successRoute}):Object(P.jsxs)("div",{className:"page-body",children:[Object(P.jsx)("h1",{children:"Login"}),Object(P.jsxs)(z.a,{onSubmit:O,children:[Object(P.jsxs)(z.a.Group,{children:[Object(P.jsx)(z.a.Control,{type:"email",required:!0,value:a,onChange:function(e){return c(e.target.value)},placeholder:"Enter Username"}),Object(P.jsx)(z.a.Control,{type:"password",required:!0,value:i,onChange:function(e){return h(e.target.value)},placeholder:"Enter Current Password"})]}),Object(P.jsx)("br",{}),Object(P.jsx)(K.a,{as:l.b,to:"/",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Login"})]})]})},oe=function(e){var t=Object(n.useState)(""),r=Object(j.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(""),o=Object(j.a)(s,2),i=o[0],h=o[1],O=Object(n.useState)(""),x=Object(j.a)(O,2),m=x[0],f=x[1],v=Object(n.useState)(""),g=Object(j.a)(v,2),w=g[0],S=g[1],y=Object(n.useState)(""),k=Object(j.a)(y,2),L=k[0],N=k[1],U=Object(n.useState)(""),I=Object(j.a)(U,2),D=I[0],E=I[1],A=function(){var t=Object(d.a)(u.a.mark((function t(r){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),e.setLoadingState(!0),n={username:a,password:i,first_name:m,last_name:w,email_address:L,permission_group:D},t.next=5,C(n);case 5:(c=t.sent)&&(c.err?console.log("An error occured"):"Username already exists"==c.data&&console.log("Error: "+c.data),p.auth().createUserWithEmailAndPassword(L,i).then((function(e){console.log(e)})).catch((function(e){return console.error(e)})),e.setLoadingState(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.isLoggedIn?(console.log("You are already logged in"),Object(P.jsx)(b.a,{to:e.successRoute})):Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Register Account"}),Object(P.jsxs)(z.a,{onSubmit:A,children:[Object(P.jsxs)(z.a.Group,{children:[Object(P.jsx)(z.a.Control,{type:"username",required:!0,value:a,onChange:function(e){return c(e.target.value)},placeholder:"Enter Username"}),Object(P.jsx)(z.a.Control,{type:"text",value:m,onChange:function(e){return f(e.target.value)},placeholder:"Enter First Name"}),Object(P.jsx)(z.a.Control,{type:"text",value:w,onChange:function(e){return S(e.target.value)},placeholder:"Enter Last Name"}),Object(P.jsx)(z.a.Control,{type:"email",value:L,onChange:function(e){return N(e.target.value)},placeholder:"Enter Email"}),Object(P.jsx)(z.a.Control,{type:"password",required:!0,value:i,onChange:function(e){return h(e.target.value)},placeholder:"Enter Password"}),Object(P.jsx)(z.a.Label,{children:"Access Level"}),Object(P.jsxs)(z.a.Control,{as:"select","aria-label":"Permissions Select",value:D,onChange:function(e){return E(e.target.value)},children:[Object(P.jsx)("option",{defaultValue:!0,children:"Standard"}),Object(P.jsx)("option",{children:"Administrator"})]})]}),Object(P.jsx)(K.a,{as:l.b,to:"/",variant:"primary",children:"Back"}),Object(P.jsx)(K.a,{variant:"primary",type:"submit",children:"Signup"})]})]})},ie=function(e){var t=Object(n.useState)(!0),r=Object(j.a)(t,2),a=r[0],c=(r[1],Object(n.useState)("d-none d-md-block bg-light nav sidebar")),s=Object(j.a)(c,2),o=s[0],i=(s[1],Object(n.useState)("Collapse")),b=Object(j.a)(i,2);b[0],b[1];Object(n.useEffect)((function(){}),[a]);var h=function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),e.setLoadingState(!0),p.auth().signOut().then((function(){console.log("Signed out user"),e.setLoggedOutState(),e.setLoadingState(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)(D.a,{className:o,children:[Object(P.jsx)(D.a.Link,{className:"menu-link",as:l.b,to:"/dashboard",children:"Dashboard"}),Object(P.jsx)(D.a.Link,{className:"menu-link",as:l.b,to:"/admin/customers",children:"Customers"}),Object(P.jsx)(D.a.Link,{className:"menu-link",as:l.b,to:"/admin/products",children:"Products"}),Object(P.jsx)(D.a.Link,{className:"menu-link",as:l.b,to:"/admin/users",children:"Users"}),Object(P.jsx)(D.a.Link,{className:"menu-link",as:l.b,to:"/dashboard",disabled:!0,children:"Settings/Tools"}),Object(P.jsx)(D.a.Link,{className:"menu-link",onClick:h,children:"Logout"})]})},ue=!1;var de=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),s=Object(j.a)(c,2),i=s[0],h=s[1],O=Object(n.useState)(!0),x=Object(j.a)(O,2),f=x[0],v=x[1],C=Object(n.useState)("page-content-wrapper"),w=Object(j.a)(C,2),S=w[0],y=w[1],k=function(e){h(!0),a(e)},L=function(e){a(""),h(!1)},I=function(e){v(e)};Object(n.useEffect)((function(){return ue=!0,i||D(),i?"Administrator"==r.permission_group&&y("page-content-wrapper-user"):y("page-content-wrapper"),function(){ue=!1}}),[i]);var D=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue&&p.auth().onAuthStateChanged(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,g(t.email);case 3:r=e.sent,a(r),h(!0),console.log(t.email+" is logged in"),e.next=12;break;case 9:a(""),h(!1),console.log("User not logged in");case 12:v(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(P.jsx)("div",{className:"app-wrapper",children:f?Object(P.jsx)(m.a,{animation:"border"}):Object(P.jsxs)(l.a,{children:[Object(P.jsx)("div",{className:"container-fluid",children:i?"Administrator"!=r.permission_group?Object(P.jsx)(A,{user:r,isLoggedIn:i,setLoggedOutState:L,setLoadingState:I}):Object(P.jsx)(_,{user:r,setLoggedOutState:L,setLoadingState:I}):Object(P.jsx)(te,{})}),Object(P.jsxs)("div",{className:"container-fluid body-wrapper p-3",children:[i&&"Administrator"==r.permission_group?Object(P.jsx)("div",{className:"sidebar-wrapper",children:Object(P.jsx)(ie,{setLoggedOutState:L,setLoadingState:I})}):null,Object(P.jsxs)("div",{className:S,children:[Object(P.jsx)(N,{exact:!0,path:"/admin/create-user",user:r,isLoggedIn:i,component:G}),Object(P.jsx)(N,{exact:!0,path:"/admin/add-product",user:r,isLoggedIn:i,component:Z}),Object(P.jsx)(N,{exact:!0,path:"/admin/users",user:r,isLoggedIn:i,component:H}),Object(P.jsx)(N,{exact:!0,path:"/admin/products",user:r,isLoggedIn:i,component:W}),Object(P.jsx)(N,{exact:!0,path:"/admin/users/edit/:id",user:r,isLoggedIn:i,component:ee}),Object(P.jsx)(N,{exact:!0,path:"/admin/products/edit/:id",user:r,isLoggedIn:i,component:$}),Object(P.jsx)(b.b,{exact:!0,path:"/401",component:U}),Object(P.jsx)(b.b,{exact:!0,path:"/catalogue",component:ne}),Object(P.jsx)(b.b,{exact:!0,path:"/",component:ae}),Object(P.jsx)(b.b,{exact:!0,path:"/login",render:function(e){return Object(P.jsx)(se,Object(o.a)(Object(o.a)({},e),{},{successRoute:"/dashboard",isLoggedIn:i,setIsLoggedInState:k,setLoadingState:I}))}}),Object(P.jsx)(b.b,{exact:!0,path:"/signup",render:function(e){return Object(P.jsx)(oe,Object(o.a)(Object(o.a)({},e),{},{successRoute:"/dashboard",isLoggedIn:i,setLoadingState:I}))}}),Object(P.jsx)(b.b,{exact:!0,path:"/dashboard",render:function(e){return Object(P.jsx)(ce,Object(o.a)(Object(o.a)({},e),{},{failedRoute:"/",user:r,isLoggedIn:i,setIsLoggedInState:k,setLoggedOutState:L,setLoadingState:I}))}})]})]})]})})};s.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(de,{})}),document.getElementById("root"))}},[[526,1,2]]]);
//# sourceMappingURL=main.cc425511.chunk.js.map